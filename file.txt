function addPackage() {
    const packageDiv = document.createElement('div');
    packageDiv.className = 'package-group';
    packageDiv.innerHTML = `
        <div class="form-group package-content">
            <div class="package-header">
                <label class="form-label">Package Name:</label>
                <button type="button" class="remove-package-btn" onclick="removePackage(this)">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <input type="text" name="packageName" class="form-input" placeholder="e.g., com.example"/>
        </div>
        <div class="form-group">
            <label class="form-label">Log Level:</label>
            <select name="packageLevel" class="form-select">
                <option value="WARN">WARN</option>
                <option value="FATAL">FATAL</option>
                <option value="ERROR">ERROR</option>
                <option value="INFO">INFO</option>
                <option value="DEBUG">DEBUG</option>
                <option value="TRACE">TRACE</option>
            </select>
        </div>
    `;
    document.getElementById('packages').appendChild(packageDiv);
}

function removePackage(button) {
    // Get the parent package-group element and remove it
    const packageGroup = button.closest('.package-group');
    
    // Check if this is the last package group
    const allPackageGroups = document.querySelectorAll('.package-group');
    if (allPackageGroups.length > 1) {
        // Animate the removal
        packageGroup.style.animation = 'fadeOut 0.3s ease-out';
        setTimeout(() => {
            packageGroup.remove();
        }, 300);
    } else {
        // Show a popup message if trying to remove the last package group
        showPopup('error', 'Cannot remove the last package group. At least one package configuration is required.');
    }
}




.package-group {
    position: relative;
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
    transition: all 0.3s ease;
}

.package-content {
    position: relative;
}

.package-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

/* Remove Button Styling */
.remove-package-btn {
    background: none;
    border: none;
    color: #dc3545;
    padding: 5px;
    cursor: pointer;
    transition: color 0.2s ease;
    position: absolute;
    top: 0;
    right: 0;
}

.remove-package-btn:hover {
    color: #c82333;
}

.remove-package-btn i {
    font-size: 1.1rem;
}

/* Animation for removal */
@keyframes fadeOut {
    from {
        opacity: 1;
        transform: translateX(0);
    }
    to {
        opacity: 0;
        transform: translateX(-20px);
    }
}

/* Hover effect for package group */
.package-group:hover {
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
